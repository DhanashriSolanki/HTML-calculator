<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">

        <title>HTML CALCULATOR</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.2/font/bootstrap-icons.min.css"/>

        <style>
            .calc-btn{
                width:70px;
                height:60px;
                background-color: #ffdab9;
                border:0cap;
                box-shadow:0 3px 6px 0;
                transition-duration: 0.2s;
                
            }
            .calc-btn:hover{
                box-shadow:0 6px 10px 0;
                background-color: peachpuff;
            }
            
            .equal_to{
                background-color:#008000;
                color:white;
            }
            .equal_to:hover{
                background-color:green;
                color:white;
            }
            .op-symb{
                background-color: #ffa500;
                color:white;
            }
            .op-symb:hover{
                background-color: orange;
                color:white;
            }
            .calc-display{
                background-color: black;
                color:white;
                height:100px;
                width:350px;
                border-radius: 10px;
                box-shadow: 0 3px 6px 0;
            }
            .card{
                background-color: #808080;
            }
            .inputString{
                margin-top:5px;
                height:20px;
                display:block;
                font-size:20px;
            }
            .expressionString{
                margin-top:5px;
                height:20px;
                display:block;
                font-size:20px;
            }
            .valueString{
                margin-top:5px;
                height:20px;
                display:block;
                font-size:20px;
            }
        </style>
    </head>
    <body>
        <div class="container p-5">
            <div class="d-flex justify-content-center"> <!--adds a flex box to align contents-->
                <div class="col-sm-12 col-md-8 col-lg-6 col-xl-auto p-2"> <!--responsive card for small,medium and large screen-->
                    <div class="card">

                        <!--display screen-->
                        <div class="d-flex justify-content-center p-4">
                            <div class="row">
                                <div class="col-sm-12 col-md-8 col-lg-6 col-xl-auto calc-display">
                                    <div id="number_div" class="inputString"></div>
                                    <div id="expression" class="expressionString"></div>
                                    <div id="value_div" class="valueString"></div>
                                </div>
                                <input type="hidden" id="savedExpression">

                            </div>
                        </div>

                        <!--buttons-->
                        <div class="d-flex justify-content-center align-items-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="NumLock"><small>num lock</small></button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="Delete">CE</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="Delete">Del</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn op-symb" data-event_key="/">/</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-flex justify-content-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="7">7</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="8">8</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="9">9</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn op-symb" data-event_key="*">x</button>
                                </div>
                            </div>
                        </div>
                        

                        <div class="d-flex justify-content-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="4">4</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="5">5</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="6">6</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn op-symb" data-event_key="-">-</button>
                                </div>
                            </div>
                        </div>
                        

                        <div class="d-flex justify-content-center p-3">
                            <div class="row">
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="1">1</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="2">2</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key="3">3</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn op-symb" data-event_key="+">+</button>
                                </div>
                            </div>
                        </div>
                        

                        <div class="d-flex justify-content-center p-3">
                            <div class="row">
                                <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                    <button type="button" class="btn btn-light calc-btn" style="width:150px" data-event_key="0">0</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn" data-event_key=".">.</button>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                    <button type="button" class="btn btn-light calc-btn equal_to" data-event_key="=">=</button>
                                </div>
                                
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
            
            
        </div>
        <!--jquery link added first because bootstrap is depended on jquery this version is however not depended-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
        <script>
            $(document).on('keypress',function(e){
                $('button[data-event_key="'+e.key+'"]').addClass('active')
                if((e.keyCode >= 48 && e.keyCode <= 57)||(e.keyCode >= 96 && e.keyCode <=105)){
                    appendNumber(e.key)
                }
                else{
                    if(e.key=='+' || e.key=='-' ||e.key=='*' || e.key=='/'){
                        generateExpression(e.key);
                    }
                }
                console.log(e.key);
            })
            $(document).on('keyup',function(e){
                $('button[data-event_key="'+e.key+'"]').removeClass('active')
                console.log(e.key);
            })
            $('.calc-btn').on('click',function(e){
                var key=$(this).data('event_key')
                if(key!='+' && key!='-' && key!='*' && key!='/' && key!='.' && key!='=' && key!='Delete' && key!='NumLock'){
                    appendNumber(key);
                }
                else{
                    if(key=='+' || key=='-' ||key=='*' || key=='/'){
                        generateExpression(key);
                    }
                    else if(key=='='){
                        evaluateExpression();
                    }
                    else if(key=='Delete'){
                        clearCalci();
                    }
                }
                console.log(key);
            })

            function appendNumber(number){
                var existingNumber=$("#number_div").html();
                var currentString=number;
                var outputString="";
                if(existingNumber!="" && existingNumber!= undefined && existingNumber!= null){
                    if(existingNumber=='0'){
                        outputString=number;
                    }
                    else{
                        outputString=existingNumber+=currentString;
                    }
                }
                else{
                    outputString=currentString;
                }
                $('#number_div').html(outputString);
            }
            function generateExpression(operator){
                var existingNumber=$("#number_div").html();
                var currentOperator=operator;
                var expression='';
                var savedExpression=$('#savedExpression').val();
                if(savedExpression==''||savedExpression==null|| savedExpression==undefined){
                    expression=parseInt(existingNumber)+operator;
                }
                else{
                    expression=savedExpression+existingNumber+operator;
                }
                $('#number_div').html("")
                $('#savedExpression').val(expression)
                $('#expression').html(expression)
            }
            function evaluateExpression()
            {
                var result='';
                var expression=$('#savedExpression').val();
                var existingNumber=$("#number_div").html();
                if(existingNumber!='' ||existingNumber!=null||existingNumber!=undefined){
                    expression=expression+parseInt(existingNumber);
                    $('#expression').html(expression)
                }
                result=eval(expression);
                $('#savedExpression').val(result)
                $('#number_div').html("")
                $('#value_div').html(result)
            }
            function clearCalci(){
                $('#number_div').html("")
                $('#savedExpression').val("")
                $('#expression').html("")
                $('#value_div').html("")
            }
        </script>
    </body>
</html>